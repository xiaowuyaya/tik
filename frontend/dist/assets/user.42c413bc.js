import{h as a}from"./request.c7b83a79.js";import{A as s,M as u,C as o,D as i,E as m}from"./index.1f476c61.js";function k(e){return a.request({url:"/user/register",method:"POST",data:e})}function d(e){return a.request({url:"/user/login",method:"POST",data:e})}function c(e){return a.request({url:"/user/getMyInfo",method:"POST",data:e})}function h(e){return a.request({url:"/user/updateUserInfo",method:"POST",data:e})}function F(){return a.request({url:"/user/keepLoginStatus",method:"POST"})}function l(e){return a.request({url:"/environment/add",method:"POST",data:e})}const g=s({id:"user",state:()=>({username:"",nickName:"",avatarUrl:"",email:"",phone:"",environment:"",summonerId:"",summonerName:"",wxOpenId:"",expiration:""}),getters:{},actions:{async doLogin(e){const t=await d(e),{token:r,userinfo:n}=t.data;this.username=n.username,this.nickName=n.nickName,this.avatarUrl=n.avatarUrl,this.email=n.email,this.phone=n.phone,this.wxOpenId=n.wxOpenId,u.success({content:"\u767B\u5165\u6210\u529F\uFF0C\u6B63\u5728\u52A0\u8F7D\u4E2D",duration:3*1e3}),o(r)},logout(){i.error({title:"\u9000\u51FA\u8D26\u53F7",content:"\u662F\u5426\u786E\u5B9A\u9000\u51FA\u5F53\u524D\u8D26\u53F7\uFF1F",closable:!0,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",simple:!0,hideCancel:!1,async onOk(){m(),window.location.reload()},onClose(){}})},async myInfo(e){const t=await c(e);this.username=t.data.username,this.nickName=t.data.nickName,this.avatarUrl=t.data.avatarUrl,this.email=t.data.email,this.phone=t.data.phone,this.wxOpenId=t.data.wxOpenId,u.success({content:`\u6B22\u8FCE\u56DE\u6765\uFF1A${this.nickName}`,duration:3*1e3})},async registerEnvironment(){const e={summonerName:this.summonerName,environment:this.environment,summonerId:this.summonerId};await l(e)},async updateUser(){await h({nickName:this.nickName,email:this.email,phone:this.phone})}}});export{F as k,k as r,g as u};
